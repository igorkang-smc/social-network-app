{% extends "base.html" %}

{% block title %}Upload an image{% endblock %}

{% block content %}
  <h1>Bookmark an image</h1>
  <form method="post" enctype="multipart/form-data">
    {{ form.as_p }}
    {% csrf_token %}
    <input type="submit" value="Upload it!">
  </form>

  <div id="preview-container" style="margin-top: 20px;">
    <img id="preview" class="image-preview" style="max-width: 300px; display: none;">
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      const input = document.querySelector('input[type="file"]');
      const preview = document.getElementById("preview");

      if (input) {
        input.addEventListener("change", function () {
          const file = this.files[0];
          if (file) {
            const reader = new FileReader();
            reader.onload = function (e) {
              preview.src = e.target.result;
              preview.style.display = "block";
            }
            reader.readAsDataURL(file);
          } else {
            preview.style.display = "none";
          }
        });
      }
    });
  </script>
{% endblock %}
